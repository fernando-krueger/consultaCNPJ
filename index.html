<!DOCTYPE html>
<html>
<head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>

<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<style>
body{
  width: 60%;
 margin-left: 15%;

}


input{
 border-radius: 5px;
 width: 80%;
}

.not-available {
    color: red;
    /* Adicione aqui qualquer outra estilização desejada para campos não disponíveis */
}

@media print{
  #obs{
    display:none;
  }
  #btn_imprimir{
   display: none;
  }
  body{
   justify-content: center;
   margin:0px;
  }
 }
</style>
</head>
<body>
<h1 style="text-align: center">CONSULTA CNPJ</h1>


<label for="CNPJ">CNPJ:</label><br>
<div class="input-group mb-3">
  <input type="text" class="form-control" id="cnpj" name="cnpj" data-mask="00.000.000/0000-00" onblur="checkCnpj(this.value)">
   <div class="input-group-append">
  <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('cnpj')">Copiar</button><br>
   </div>
</div>

    <!-- sobre a empresa-->

<div id="sobre" style="border: 1px solid #007bff; margin: 15px; border-radius: 10px; padding: 10px; margin-top:20px;">
 <h4 style="text-align: center"> Sobre a empresa </h4>
  <label for="fantasia">Nome fantasia:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="fantasia" name="fantasia">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('fantasia')">Copiar</button>
    </div>
  </div>

  <label for="nome">Razão social:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="nome" name="nome">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('nome')">Copiar</button>
    </div>
  </div>
</div>

<!-- contato -->
<div id="contato" style="border: 1px solid #007bff; margin: 15px; border-radius: 10px; padding: 10px; margin-top:20px;">
 <h4 style="text-align: center"> Contato </h4>
  <label for="telefone">Telefone:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="telefone" name="telefone">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('telefone')">Copiar</button>
    </div>
  </div>

  <label for="email">Email:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="email" name="email">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('email')">Copiar</button>
    </div>
  </div>
</div>

<!-- Endereço -->
<div id="endereco" style="border: 1px solid #007bff; margin: 15px; border-radius: 10px; padding: 10px; margin-top:20px;">
 <h4 style="text-align: center"> Endereço </h4>
 <div style="border: 1px solid #007bff; margin: 15px; border-radius: 10px; padding: 10px; margin-top:20px;">
  <label for="logradouro">Logradouro:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="logradouro" name="logradouro">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('logradouro')">Copiar</button>
    </div>
  </div>

  <label for="complemento">Complemento:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="complemento" name="complemento">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('complemento')">Copiar</button>
    </div>
  </div>

  <label for="numero">Número:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="numero" name="numero">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('numero')">Copiar</button>
    </div>
  </div>
 </div>
  <label for="bairro">Bairro:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="bairro" name="bairro">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('bairro')">Copiar</button>
    </div>
  </div>

  <label for="municipio">Município:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="municipio" name="municipio">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('municipio')">Copiar</button>
    </div>
  </div>

  <label for="uf">UF:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="uf" name="uf">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('uf')">Copiar</button>
    </div>
  </div>

  <label for="cep">CEP:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="cep" name="cep">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('cep')">Copiar</button>
    </div>
  </div>

  <label for="atividade_principal_cod">CNAE Atividade principal:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="atividade_principal_cod" name="atividade_principal_cod">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('atividade_principal_cod')">Copiar</button>
    </div>
  </div>

  <label for="atividade_principal">Atividade Principal:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="atividade_principal" name="atividade_principal">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('atividade_principal')">Copiar</button>
    </div>
  </div>

  <label for="atividades_secundarias_cod">CNAE Atividades Secundárias:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="atividades_secundarias_cod" name="atividades_secundarias_cod">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('atividades_secundarias_cod')">Copiar</button>
    </div>
  </div>

  <label for="atividades_secundarias">Atividades Secundárias:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="atividades_secundarias" name="atividades_secundarias">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('atividades_secundarias')">Copiar</button>
    </div>
  </div>

 <label for="qsa">Socio:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="qsa" name="qsa">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('qsa')">Copiar</button>
    </div>
  </div>
  
  <label for="natureza_juridica">Natureza Jurídica:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="natureza_juridica" name="natureza_juridica">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('natureza_juridica')">Copiar</button>
    </div>
  </div>
</div>

<!-- Demais informações -->
<div id="demais" style="border: 1px solid #007bff; margin: 15px; border-radius: 10px; padding: 10px; margin-top:20px;">
 <h4 style="text-align: center"> Demais informações </h4>
  <label for="abertura">Abertura:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="abertura" name="abertura">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('abertura')">Copiar</button>
    </div>
  </div>

  <label for="situacao">Situação:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="situacao" name="situacao">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('situacao')">Copiar</button>
    </div>
  </div>

  <label for="tipo">Tipo:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="tipo" name="tipo">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('tipo')">Copiar</button>
    </div>
  </div>

  <label for="porte">Porte:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="porte" name="porte">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('porte')">Copiar</button>
    </div>
  </div>

  <label for="data_situacao">Data Situação:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="data_situacao" name="data_situacao">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('data_situacao')">Copiar</button>
    </div>
  </div>

  <label for="ultima_atualizacao">Última Atualização:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="ultima_atualizacao" name="ultima_atualizacao">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('ultima_atualizacao')">Copiar</button>
    </div>
  </div>


  <label for="status">Status:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="status" name="status">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('status')">Copiar</button>
    </div>
  </div>

  <label for="efr">EFR:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="efr" name="efr">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('efr')">Copiar</button>
    </div>
  </div>

  <label for="motivo_situacao">Motivo Situação:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="motivo_situacao" name="motivo_situacao">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('motivo_situacao')">Copiar</button>
    </div>
  </div>

  <label for="situacao_especial">Situação Especial:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="situacao_especial" name="situacao_especial">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('situacao_especial')">Copiar</button>
    </div>
  </div>

  <label for="data_situacao_especial">Data Situação Especial:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="data_situacao_especial" name="data_situacao_especial">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('data_situacao_especial')">Copiar</button>
    </div>
  </div>

  <label for="capital_social">Capital Social:</label><br>
  <div class="input-group mb-3">
    <input type="text" class="form-control" id="capital_social" name="capital_social">
    <div class="input-group-append">
      <button class="btn btn-primary" id="botaoCopiar" style="width:90px;" onclick="copyToClipboard('capital_social')">Copiar</button>
    </div>
  </div>
</div>

  <button id="btn_imprimir" class="btn btn-primary " style="min-width:250px; width: 40%; margin-left: 30%; float: left;  " onclick="window.print()">Imprimir esta página</button>

<div id="obs" style="border: 1px solid #007bff; margin: 15px; margin-top: 100px; border-radius: 10px; padding: 20px; margin-top:20px; margin-bottom: 50px; float: left; width: 97%;">
        <form id="myForm" action="https://formsubmit.co/fernando.krueger@gruposave.com.br" method="POST">
            <h4 style="text-align: center"> Alguma observação para melhoria do app? </h4>
            <textarea id="obs" style="width: 100%; height: 100px; " type="text" name="obs"></textarea>
          <input type="hidden" name="_captcha" value="false">
            <button class="btn btn-primary" style="width: 100px; cursor: pointer;  height: 40px;" type="submit">Enviar</button>
        </form>
    </div>


</body>

<script type="text/javascript">

 // Função para verificar o CNPJ
function checkCnpj(cnpj) {
    $.ajax({
        url: 'https://www.receitaws.com.br/v1/cnpj/' + cnpj.replace(/\D/g, ''),
        type: "GET",
        dataType: 'jsonp',
        success: function(data) {
            if (data.nome == undefined) {
                alert(data.status + ' esse CNPJ não existe ' + data.message);
            } else {
                dataObject = data; // Armazena as informações recuperadas no objeto
                atualizarCampos(); // Atualiza os campos na tela
            }
        }
    });
}

// Função para atualizar os campos e adicionar a classe not-available se a informação estiver vazia ou indefinida
function atualizarCampo(id, valor) {
    var campo = document.getElementById(id);
    if (!valor || valor.trim() === "") {
        campo.value = "Não informado";
        campo.style.color = "red";
        campo.classList.add("not-available");
    } else {
        campo.value = valor;
        campo.style.color = ""; // Remove qualquer cor definida anteriormente
        campo.classList.remove("not-available");
    }
}

// Função para atualizar todos os campos
function atualizarCampos() {
    // Atualiza cada campo individualmente
    atualizarCampo('nome', dataObject.nome);
    atualizarCampo('abertura', dataObject.abertura);
    atualizarCampo('situacao', dataObject.situacao);
    atualizarCampo('tipo', dataObject.tipo);
    atualizarCampo('fantasia', dataObject.fantasia);
    atualizarCampo('porte', dataObject.porte);
    atualizarCampo('natureza_juridica', dataObject.natureza_juridica);
    atualizarCampo('atividade_principal_cod', (dataObject.atividade_principal && dataObject.atividade_principal.length > 0) ? dataObject.atividade_principal[0].code : "");
    atualizarCampo('atividade_principal', (dataObject.atividade_principal && dataObject.atividade_principal.length > 0) ? dataObject.atividade_principal[0].text : "");
    atualizarCampo('atividades_secundarias_cod', (dataObject.atividades_secundarias && dataObject.atividades_secundarias.length > 0) ? dataObject.atividades_secundarias[0].code : "");
    atualizarCampo('atividades_secundarias', (dataObject.atividades_secundarias && dataObject.atividades_secundarias.length > 0) ? dataObject.atividades_secundarias[0].text : "");
    atualizarCampo('qsa', (dataObject.qsa && dataObject.qsa.length > 0) ? dataObject.qsa[0].nome : "");
    atualizarCampo('logradouro', dataObject.logradouro);
    atualizarCampo('numero', dataObject.numero);
    atualizarCampo('municipio', dataObject.municipio);
    atualizarCampo('bairro', dataObject.bairro);
    atualizarCampo('uf', dataObject.uf);
    atualizarCampo('cep', dataObject.cep);
    atualizarCampo('email', dataObject.email);
    atualizarCampo('telefone', dataObject.telefone);
    atualizarCampo('data_situacao', dataObject.data_situacao);
    atualizarCampo('cnpj', dataObject.cnpj);
    atualizarCampo('ultima_atualizacao', dataObject.ultima_atualizacao);
    atualizarCampo('status', dataObject.status);
    atualizarCampo('complemento', dataObject.complemento);
    atualizarCampo('efr', dataObject.efr);
    atualizarCampo('motivo_situacao', dataObject.motivo_situacao);
    atualizarCampo('situacao_especial', dataObject.situacao_especial);
    atualizarCampo('data_situacao_especial', dataObject.data_situacao_especial);
    atualizarCampo('capital_social', dataObject.capital_social);
}

// Função para copiar o conteúdo do input para a área de transferência
function copyToClipboard(inputId) {
    event.preventDefault();
    var input = document.getElementById(inputId);
    input.select();
    input.setSelectionRange(0, 99999);
    document.execCommand("copy");

    var botao = event.target; // Obtém o botão clicado
    botao.textContent = 'Copiado!';

    setTimeout(function() {
        botao.textContent = 'Copiar';
    }, 2500); // 2.5 segundos
}


</script>


</html>
